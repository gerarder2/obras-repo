<!-- modal -->
<div class="modal-header" ngxModalDraggable>
  <div class="container no-cursor">
    <div class="row">
      <div class="col-md-6">
        <small>Numero de contrato</small>
        <p>{{ obra.numeroContrato }}</p>
      </div>
      <div class="col-md-2">
        <small>Ejercicio</small>
        <p>{{ '-' }}</p>
      </div>
      <div class="col-md-2">
        <small>Beneficiarios</small>
        <p>{{ obra.totalBeneficiados }}</p>
      </div>
      <div class="col-md-2">
        <small>Credito</small>
        <p>{{ obra.esCredito ? 'SI' : 'NO' }}</p>
      </div>
    </div>
  </div>
  <div class="ml-auto">
    <button type="button" class="close" (click)="bsModalRef.hide()">
      <span aria-hidden="true"><i class="fa fa-close"></i></span>
    </button>
  </div>
</div>
<div class="modal-body">
  <p-tabView>
    <p-tabPanel header="DATOS GENERALES">
      <div class="row">
        <div class="col-md-6">
          <small>Objeto</small>
          <p>{{ obra.objeto }}</p>
          <div class="row">
            <div class="col-12">
              <small>Geolocalizacion</small>
              <p>[{{ obra.latitud }},{{ obra.longitud }}]</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="row">
            <div class="col-12">
              <small>Fecha contrato</small>
              <p>{{ obra.fechaContratacion | date: 'longDate':'':'es' }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Origen recurso</small>
              <p>{{ '-' }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Periodo ejecución</small>
              <p>
                {{ obra.fechaInicio | date: 'longDate':'':'es' }} -
                {{ obra.fechaEstimadaFin | date: 'longDate':'':'es' }}
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Dirección</small>
              <p>{{ '-' }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Residente o Supervisor</small>
              <p>{{ obra.nombreSupervisor }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Contratista</small>
              <p>{{ obra.descripcionContratista }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="row">
            <div class="col-12">
              <small>Tipo Modalidad</small>
              <p>{{ obra.descripcionTipoModalidad }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Número autorización</small>
              <p>{{ '-' }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Municipio</small>
              <p>{{ obra.nombreMunicipio }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Tipo contrato</small>
              <p>{{ obra.descripcionTipoContrato }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Tipo Obra</small>
              <p>{{ obra.descripcionTipoObraSocial }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <small>Dependencia / Organismo</small>
              <p>{{ obra.descripcionDependencia }}</p>
            </div>
          </div>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="AVANCES">
      <!-- <p-knob [(ngModel)]="value" valueColor="MediumTurquoise" rangeColor="SlateGray"></p-knob> -->
      <!--The content below is only a placeholder and can be replaced.-->

      <ng-template pTemplate="content">
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="row">
              <div class="col-12">
                <div class="card shadow">
                  <div class="card-body p-0 clearfix">
                    <i class="fas fa-hand-holding-dollar bg-green p-4 font-5xl mr-3 float-left"></i>
                    <div class="pt-4 text-muted text-uppercase font-weight-bold font-xs">
                      MONTO TOTAL EJERCIDO (MXN)
                    </div>
                    <div class="h3 text-primary mb-0">
                      <strong>{{ this.obra.montoInversion | currency }}</strong>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                <ng-container *ngIf="showGraficaPorcentaje">
                  <div class="card shadow">
                    <div class="card-body">
                      <div id="chart">
                        <apx-chart
                          [series]="chartOptionsLine.series"
                          [chart]="chartOptionsLine.chart"
                          [xaxis]="chartOptionsLine.xaxis"
                          [dataLabels]="chartOptionsLine.dataLabels"
                          [grid]="chartOptionsLine.grid"
                          [stroke]="chartOptionsLine.stroke"
                          [colors]="chartOptionsLine.colors"
                          [markers]="chartOptionsLine.markers"
                        ></apx-chart>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="row">
              <div class="col-12">
                <ng-container *ngIf="showGraficaPorcentaje">
                  <div class="card shadow">
                    <div class="card-body">
                      <div id="chart">
                        <apx-chart
                          [series]="chartOptionsRadial.series"
                          [chart]="chartOptionsRadial.chart"
                          [plotOptions]="chartOptionsRadial.plotOptions"
                          [labels]="chartOptionsRadial.labels"
                          [colors]="chartOptionsRadial.colors"
                          [stroke]="chartOptionsRadial.stroke"
                        ></apx-chart>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
              <div class="col-12">
                <ng-container *ngIf="showGraficaPorcentaje">
                  <div class="card shadow">
                    <div class="card-body">
                      <div id="chart">
                        <apx-chart
                          [series]="chartOptionsPie.series"
                          [chart]="chartOptionsPie.chart"
                          [labels]="chartOptionsPie.labels"
                          [responsive]="chartOptionsPie.responsive"
                          [colors]="chartOptionsPie.colors"
                        ></apx-chart>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </p-tabPanel>

    <p-tabPanel header="LICITACIÓN">
      <div class="row">
        <div class="col-6">
          <small><strong>Tipo de Licitacion</strong></small>
          <p>{{ params.tipoLicitacion }}</p>
        </div>
        <div class="col-3">
          <small><strong>Fecha</strong></small>
          <p>{{ params.fecha }}</p>
        </div>
        <div class="col-3">
          <small><strong>Normatividad</strong></small>
          <p>Federal</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12"></div>
      </div>
      <div class="row">
        <div class="col-12">
          <p-table
            [ngClass]="{ odd: true }"
            [value]="eventos"
            [tableStyle]="{ 'min-width': '60rem' }"
            styleClass="p-datatable-sm p-datatable-striped"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>Evento</th>
                <th>Fecha</th>
                <th>Evidencia</th>
                <th>Documentos</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
              <tr>
                <td>{{ product.evento }}</td>
                <td>
                  {{ product.fecha }}
                </td>
                <td>
                  <button class="btn btn-primary"><i class="fas fa-play"></i> ver Video</button>
                </td>
                <td>
                  <button class="btn btn-primary"><i class="fas fa-file-download"></i> Documento</button>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="EVIDENCIA DOCUMENTADA">
      <ng-template pTemplate="content">
        <div class="row">
          <div class="col-12 text-center">
            <p class="h4 mb-5">En esta sección se encuentra toda la documentación del contrato</p>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="card-group">
              <div class="card shadow text-center">
                <div class="card-body">
                  <h5 class="card-title">CONTRATO</h5>
                  <p class="card-text">&nbsp;</p>
                  <a href="#" class="btn btn-outline-primary"><i class="fas fa-download"></i> Descargar</a>
                </div>
              </div>
              <div class="card shadow text-center">
                <div class="card-body">
                  <h5 class="card-title">FALLO</h5>
                  <p class="card-text">&nbsp;</p>
                  <a href="#" class="btn btn-outline-primary"><i class="fas fa-download"></i> Descargar</a>
                </div>
              </div>
              <div class="card shadow text-center">
                <div class="card-body">
                  <h5 class="card-title">TODOS LOS ARCHIVOS</h5>
                  <p class="card-text">&nbsp;</p>
                  <a href="#" class="btn btn-outline-primary"><i class="fas fa-download"></i> Descargar</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="EVIDENCIA FOTOGRAFICA">
      <ng-template pTemplate="content">
        <div class="row" *ngIf="!showCarousel">
          <div class="col-12">
            <div class="card-deck">
              <div class="card shadow" *ngFor="let item of obra.evidencias">
                <div class="card-body">
                  <h5 class="card-title">{{ item.descripcion }}</h5>
                  <p class="card-text">&nbsp;</p>
                  <ng-container *ngFor="let img of item.imagenes; let index = index">
                    <a
                      href="#"
                      style="text-decoration: none"
                      (click)="onImageSelected(item, index); $event.preventDefault()"
                    >
                      <img src="{{ img.rutaPublica + img.nombre }}" class="img-thumbnail img-64" alt="..." />
                    </a>
                  </ng-container>
                  <p class="card-text"><small class="text-muted">Click en la imagen para mas información</small></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row justify-content-center">
          <p-galleria
            [value]="images"
            [(visible)]="displayCustom"
            [(activeIndex)]="activeIndex"
            [responsiveOptions]="responsiveOptions"
            [containerStyle]="{ 'max-width': '850px'}"
            [numVisible]="7"
            [circular]="true"
            [fullScreen]="true"
            [showItemNavigators]="true"
            [showThumbnails]="false"
            [baseZIndex]="100000"
          >
            <ng-template pTemplate="item" let-item>
              <img [src]="item.previewImageSrc" style=" max-height: calc(100vh - 50px); width: auto; display: block" />
            </ng-template>
            <ng-template pTemplate="thumbnail" let-item>
              <div class="grid grid-nogutter justify-content-center">
                <img [src]="item.thumbnailImageSrc" style="display: block" />
              </div>
            </ng-template>
          </p-galleria>
          <!-- <div class="12" *ngIf="showCarousel">
            <div class="card shadow">
              <div class="card-body">
                <div class="card-title mb-5">
                  <button type="button" class="close" (click)="showCarousel = false">
                    <span aria-hidden="true"><i class="fa fa-close"></i></span>
                  </button>
                </div>
                <carousel
                [activeSlide]="imageIndex"
                >
                  <slide *ngFor="let slide of evidencia.imagenes; let index = index">
                    <img class="carousel" src="{{ slide.rutaPublica + slide.nombre }}" alt="image slide" />
                    <div class="carousel-caption">
                      <h4>Evidencia {{ index }}</h4>
                      <p>{{ evidencia.descripcion }}</p>
                    </div>
                  </slide>
                </carousel>
              </div>
            </div>
          </div> -->
        </div>
      </ng-template>
    </p-tabPanel>
  </p-tabView>
</div>
